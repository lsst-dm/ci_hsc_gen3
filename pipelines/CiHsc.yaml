description: CI HSC
instrument: lsst.obs.subaru.gen3.hsc.instrument.HyperSuprimeCam
inherits:
  - location: $PIPE_TASKS_DIR/pipelines/DataReleaseProduction.yaml
tasks:
  makeWarpTask:
    class: lsst.pipe.tasks.makeCoaddTempExp.MakeWarpTask
    config:
      matchingKernelSize: 29
      makePsfMatched: True
      modelPsf.defaultFwhm: 7.7
      # Disable external calibrations: Gen3 isn't ready for these yet
      recalibrate.doApplyExternalPhotoCalib: False
      recalibrate.doApplyExternalSkyWcs: False
      recalibrate.doApplySkyCorr: False
      doWriteEmptyWarps: True
      python: config.warpAndPsfMatch.psfMatch.kernel['AL'].alardSigGauss = [1.0, 2.0, 4.5]
  mergeDetections:
    class: lsst.pipe.tasks.mergeDetections.MergeDetectionsTask
    config:
      priorityList: ["i", "r"]
  mergeMeasurements:
    class: lsst.pipe.tasks.mergeMeasurements.MergeMeasurementsTask
    config:
      priorityList: ["i", "r"]
  forcedPhotCcd:
    class: lsst.meas.base.forcedPhotCcd.ForcedPhotCcdTask
    config:
      # Disable external calibrations: Gen3 isn't ready for these yet
      recalibrate.doApplyExternalPhotoCalib: False
      recalibrate.doApplyExternalSkyWcs: False
      recalibrate.doApplySkyCorr: False
